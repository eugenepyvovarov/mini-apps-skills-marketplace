#!/usr/bin/env bash
set -euo pipefail

SKILL_NAME="goals-habits-tracker"
SKILL_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
PROJECT_ROOT="$(cd "$SKILL_ROOT/../../.." && pwd)"
SKILL_DATA_DIR="$PROJECT_ROOT/.skills-data/$SKILL_NAME"

ENV_FILE="$SKILL_DATA_DIR/.env"
if [[ ! -f "$ENV_FILE" ]]; then
  bash "$SKILL_ROOT/scripts/setup.sh" >/dev/null
fi

# shellcheck disable=SC1090
source "$ENV_FILE"

export PYTHONPYCACHEPREFIX="$SKILL_DATA_DIR/cache/pycache"

exec python3 "$SKILL_ROOT/scripts/goals_cli.py" "$@"

